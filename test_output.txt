    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.01s
     Running unittests src/lib.rs (target/debug/deps/hulk_compiler-b60667a306cd5ad6)

running 1 test
test parser::tests::test_parse_integral_program ... FAILED

failures:

---- parser::tests::test_parse_integral_program stdout ----

thread 'parser::tests::test_parse_integral_program' (146502) panicked at src/parser/tests.rs:639:5:
assertion `left == right` failed
  left: "Program {\n    declarations: [\n        Protocol(\n            ProtocolDecl {\n                name: \"Hashable\",\n                parent: None,\n                methods: [\n                    MethodSignature {\n                        name: \"hash\",\n                        params: [],\n                        return_type: Name(\n                            \"Number\",\n                        ),\n                    },\n                ],\n            },\n        ),\n        Protocol(\n            ProtocolDecl {\n                name: \"Comparable\",\n                parent: Some(\n                    \"Hashable\",\n                ),\n                methods: [\n                    MethodSignature {\n                        name: \"compare\",\n                        params: [\n                            Param {\n                                name: \"other\",\n                                type_annotation: Some(\n                                    Name(\n                                        \"Hashable\",\n                                    ),\n                                ),\n                            },\n                        ],\n                        return_type: Name(\n                            \"Number\",\n                        ),\n                    },\n                ],\n            },\n        ),\n        Type(\n            TypeDecl {\n                name: \"Point\",\n                params: [\n                    Param {\n                        name: \"x\",\n                        type_annotation: None,\n                    },\n                    Param {\n                        name: \"y\",\n                        type_annotation: None,\n                    },\n                ],\n                parent: None,\n                attributes: [\n                    Attribute {\n                        name: \"x\",\n                        type_annotation: None,\n                        init: Spanned {\n                            node: Identifier(\n                                \"x\",\n                            ),\n                            pos: Position {\n                                line: 11,\n                                column: 17,\n                            },\n                        },\n                    },\n                    Attribute {\n                        name: \"y\",\n                        type_annotation: None,\n                        init: Spanned {\n                            node: Identifier(\n                                \"y\",\n                            ),\n                            pos: Position {\n                                line: 12,\n                                column: 17,\n                            },\n                        },\n                    },\n                ],\n                methods: [\n                    FunctionDecl {\n                        name: \"hash\",\n                        params: [],\n                        return_type: None,\n                        body: Spanned {\n                            node: Binary(\n                                Spanned {\n                                    node: Binary(\n                                        Spanned {\n                                            node: AttributeAccess {\n                                                obj: Spanned {\n                                                    node: Identifier(\n                                                        \"self\",\n                                                    ),\n                                                    pos: Position {\n                                                        line: 13,\n                                                        column: 23,\n                                                    },\n                                                },\n                                                attribute: \"x\",\n                                            },\n                                            pos: Position {\n                                                line: 13,\n                                                column: 27,\n                                            },\n                                        },\n                                        Pow,\n                                        Spanned {\n                                            node: Number(\n                                                2.0,\n                                            ),\n                                            pos: Position {\n                                                line: 13,\n                                                column: 32,\n                                            },\n                                        },\n                                    ),\n                                    pos: Position {\n                                        line: 13,\n                                        column: 27,\n                                    },\n                                },\n                                Add,\n                                Spanned {\n                                    node: Binary(\n                                        Spanned {\n                                            node: AttributeAccess {\n                                                obj: Spanned {\n                                                    node: Identifier(\n                                                        \"self\",\n                                                    ),\n                                                    pos: Position {\n                                                        line: 13,\n                                                        column: 36,\n                                                    },\n                                                },\n                                                attribute: \"y\",\n                                            },\n                                            pos: Position {\n                                                line: 13,\n                                                column: 40,\n                                            },\n                                        },\n                                        Pow,\n                                        Spanned {\n                                            node: Number(\n                                                2.0,\n                                            ),\n                                            pos: Position {\n                                                line: 13,\n                                                column: 46,\n                                            },\n                                        },\n                                    ),\n                                    pos: Position {\n                                        line: 13,\n                                        column: 40,\n                                    },\n                                },\n                            ),\n                            pos: Position {\n                                line: 13,\n                                column: 27,\n                            },\n                        },\n                    },\n                    FunctionDecl {\n                        name: \"distance\",\n                        params: [\n                            Param {\n                                name: \"other\",\n                                type_annotation: Some(\n                                    Name(\n                                        \"Point\",\n                                    ),\n                                ),\n                            },\n                        ],\n                        return_type: None,\n                        body: Spanned {\n                            node: Sqrt(\n                                Spanned {\n                                    node: Binary(\n                                        Spanned {\n                                            node: Binary(\n                                                Spanned {\n                                                    node: Binary(\n                                                        Spanned {\n                                                            node: AttributeAccess {\n                                                                obj: Spanned {\n                                                                    node: Identifier(\n                                                                        \"self\",\n                                                                    ),\n                                                                    pos: Position {\n                                                                        line: 14,\n                                                                        column: 45,\n                                                                    },\n                                                                },\n                                                                attribute: \"x\",\n                                                            },\n                                                            pos: Position {\n                                                                line: 14,\n                                                                column: 49,\n                                                            },\n                                                        },\n                                                        Sub,\n                                                        Spanned {\n                                                            node: AttributeAccess {\n                                                                obj: Spanned {\n                                                                    node: Identifier(\n                                                                        \"other\",\n                                                                    ),\n                                                                    pos: Position {\n                                                                        line: 14,\n                                                                        column: 54,\n                                                                    },\n                                                                },\n                                                                attribute: \"x\",\n                                                            },\n                                                            pos: Position {\n                                                                line: 14,\n                                                                column: 59,\n                                                            },\n                                                        },\n                                                    ),\n                                                    pos: Position {\n                                                        line: 14,\n                                                        column: 49,\n                                                    },\n                                                },\n                                                Pow,\n                                                Spanned {\n                                                    node: Number(\n                                                        2.0,\n                                                    ),\n                                                    pos: Position {\n                                                        line: 14,\n                                                        column: 65,\n                                                    },\n                                                },\n                                            ),\n                                            pos: Position {\n                                                line: 14,\n                                                column: 49,\n                                            },\n                                        },\n                                        Add,\n                                        Spanned {\n                                            node: Binary(\n                                                Spanned {\n                                                    node: Binary(\n                                                        Spanned {\n                                                            node: AttributeAccess {\n                                                                obj: Spanned {\n                                                                    node: Identifier(\n                                                                        \"self\",\n                                                                    ),\n                                                                    pos: Position {\n                                                                        line: 14,\n                                                                        column: 70,\n                                                                    },\n                                                                },\n                                                                attribute: \"y\",\n                                                            },\n                                                            pos: Position {\n                                                                line: 14,\n                                                                column: 74,\n                                                            },\n                                                        },\n                                                        Sub,\n                                                        Spanned {\n                                                            node: AttributeAccess {\n                                                                obj: Spanned {\n                                                                    node: Identifier(\n                                                                        \"other\",\n                                                                    ),\n                                                                    pos: Position {\n                                                                        line: 14,\n                                                                        column: 79,\n                                                                    },\n                                                                },\n                                                                attribute: \"y\",\n                                                            },\n                                                            pos: Position {\n                                                                line: 14,\n                                                                column: 84,\n                                                            },\n                                                        },\n                                                    ),\n                                                    pos: Position {\n                                                        line: 14,\n                                                        column: 74,\n                                                    },\n                                                },\n                                                Pow,\n                                                Spanned {\n                                                    node: Number(\n                                                        2.0,\n                                                    ),\n                                                    pos: Position {\n                                                        line: 14,\n                                                        column: 90,\n                                                    },\n                                                },\n                                            ),\n                                            pos: Position {\n                                                line: 14,\n                                                column: 74,\n                                            },\n                                        },\n                                    ),\n                                    pos: Position {\n                                        line: 14,\n                                        column: 49,\n                                    },\n                                },\n                            ),\n                            pos: Position {\n                                line: 14,\n                                column: 39,\n                            },\n                        },\n                    },\n                ],\n            },\n        ),\n        Function(\n            FunctionDecl {\n                name: \"solve_quadratic\",\n                params: [\n                    Param {\n                        name: \"a\",\n                        type_annotation: None,\n                    },\n                    Param {\n                        name: \"b\",\n                        type_annotation: None,\n                    },\n                    Param {\n                        name: \"c\",\n                        type_annotation: None,\n                    },\n                ],\n                return_type: None,\n                body: Spanned {\n                    node: Block(\n                        [\n                            Spanned {\n                                node: Let {\n                                    bindings: [\n                                        (\n                                            \"disc\",\n                                            None,\n                                            Spanned {\n                                                node: Binary(\n                                                    Spanned {\n                                                        node: Binary(\n                                                            Spanned {\n                                                                node: Identifier(\n                                                                    \"b\",\n                                                                ),\n                                                                pos: Position {\n                                                                    line: 18,\n                                                                    column: 24,\n                                                                },\n                                                            },\n                                                            Pow,\n                                                            Spanned {\n                                                                node: Number(\n                                                                    2.0,\n                                                                ),\n                                                                pos: Position {\n                                                                    line: 18,\n                                                                    column: 28,\n                                                                },\n                                                            },\n                                                        ),\n                                                        pos: Position {\n                                                            line: 18,\n                                                            column: 24,\n                                                        },\n                                                    },\n                                                    Sub,\n                                                    Spanned {\n                                                        node: Binary(\n                                                            Spanned {\n                                                                node: Binary(\n                                                                    Spanned {\n                                                                        node: Number(\n                                                                            4.0,\n                                                                        ),\n                                                                        pos: Position {\n                                                                            line: 18,\n                                                                            column: 32,\n                                                                        },\n                                                                    },\n                                                                    Mul,\n                                                                    Spanned {\n                                                                        node: Identifier(\n                                                                            \"a\",\n                                                                        ),\n                                                                        pos: Position {\n                                                                            line: 18,\n                                                                            column: 36,\n                                                                        },\n                                                                    },\n                                                                ),\n                                                                pos: Position {\n                                                                    line: 18,\n                                                                    column: 32,\n                                                                },\n                                                            },\n                                                            Mul,\n                                                            Spanned {\n                                                                node: Identifier(\n                                                                    \"c\",\n                                                                ),\n                                                                pos: Position {\n                                                                    line: 18,\n                                                                    column: 40,\n                                                                },\n                                                            },\n                                                        ),\n                                                        pos: Position {\n                                                            line: 18,\n                                                            column: 32,\n                                                        },\n                                                    },\n                                                ),\n                                                pos: Position {\n                                                    line: 18,\n                                                    column: 24,\n                                                },\n                                            },\n                                        ),\n                                    ],\n                                    body: Spanned {\n                                        node: Block(\n                                            [\n                                                Spanned {\n                                                    node: If {\n                                                        cond: Spanned {\n                                                            node: Binary(\n                                                                Spanned {\n                                                                    node: Identifier(\n                                                                        \"disc\",\n                                                                    ),\n                                                                    pos: Position {\n                                                                        line: 19,\n                                                                        column: 21,\n                                                                    },\n                                                                },\n                                                                Lt,\n                                                                Spanned {\n                                                                    node: Number(\n                                                                        0.0,\n                                                                    ),\n                                                                    pos: Position {\n                                                                        line: 19,\n                                                                        column: 28,\n                                                                    },\n                                                                },\n                                                            ),\n                                                            pos: Position {\n                                                                line: 19,\n                                                                column: 21,\n                                                            },\n                                                        },\n                                                        then_expr: Spanned {\n                                                            node: Call {\n                                                                func: \"print\",\n                                                                args: [\n                                                                    Spanned {\n                                                                        node: String(\n                                                                            \"No real roots\",\n                                                                        ),\n                                                                        pos: Position {\n                                                                            line: 19,\n                                                                            column: 37,\n                                                                        },\n                                                                    },\n                                                                ],\n                                                            },\n                                                            pos: Position {\n                                                                line: 19,\n                                                                column: 31,\n                                                            },\n                                                        },\n                                                        else_expr: Spanned {\n                                                            node: If {\n                                                                cond: Spanned {\n                                                                    node: Binary(\n                                                                        Spanned {\n                                                                            node: Identifier(\n                                                                                \"disc\",\n                                                                            ),\n                                                                            pos: Position {\n                                                                                line: 20,\n                                                                                column: 23,\n                                                                            },\n                                                                        },\n                                                                        Eq,\n                                                                        Spanned {\n                                                                            node: Number(\n                                                                                0.0,\n                                                                            ),\n                                                                            pos: Position {\n                                                                                line: 20,\n                                                                                column: 31,\n                                                                            },\n                                                                        },\n                                                                    ),\n                                                                    pos: Position {\n                                                                        line: 20,\n                                                                        column: 23,\n                                                                    },\n                                                                },\n                                                                then_expr: Spanned {\n                                                                    node: Call {\n                                                                        func: \"print\",\n                                                                        args: [\n                                                                            Spanned {\n                                                                                node: Binary(\n                                                                                    Spanned {\n                                                                                        node: Unary(\n                                                                                            Neg,\n                                                                                            Spanned {\n                                                                                                node: Identifier(\n                                                                                                    \"b\",\n                                                                                                ),\n                                                                                                pos: Position {\n                                                                                                    line: 20,\n                                                                                                    column: 41,\n                                                                                                },\n                                                                                            },\n                                                                                        ),\n                                                                                        pos: Position {\n                                                                                            line: 20,\n                                                                                            column: 40,\n                                                                                        },\n                                                                                    },\n                                                                                    Div,\n                                                                                    Spanned {\n                                                                                        node: Binary(\n                                                                                            Spanned {\n                                                                                                node: Number(\n                                                                                                    2.0,\n                                                                                                ),\n                                                                                                pos: Position {\n                                                                                                    line: 20,\n                                                                                                    column: 46,\n                                                                                                },\n                                                                                            },\n                                                                                            Mul,\n                                                                                            Spanned {\n                                                                                                node: Identifier(\n                                                                                                    \"a\",\n                                                                                                ),\n                                                                                                pos: Position {\n                                                                                                    line: 20,\n                                                                                                    column: 50,\n                                                                                                },\n                                                                                            },\n                                                                                        ),\n                                                                                        pos: Position {\n                                                                                            line: 20,\n                                                                                            column: 46,\n                                                                                        },\n                                                                                    },\n                                                                                ),\n                                                                                pos: Position {\n                                                                                    line: 20,\n                                                                                    column: 40,\n                                                                                },\n                                                                            },\n                                                                        ],\n                                                                    },\n                                                                    pos: Position {\n                                                                        line: 20,\n                                                                        column: 34,\n                                                                    },\n                                                                },\n                                                                else_expr: Spanned {\n                                                                    node: Block(\n                                                                        [\n                                                                            Spanned {\n                                                                                node: Call {\n                                                                                    func: \"print\",\n                                                                                    args: [\n                                                                                        Spanned {\n                                                                                            node: Binary(\n                                                                                                Spanned {\n                                                                                                    node: Binary(\n                                                                                                        Spanned {\n                                                                                                            node: Unary(\n                                                                                                                Neg,\n                                                                                                                Spanned {\n                                                                                                                    node: Identifier(\n                                                                                                                        \"b\",\n                                                                                                                    ),\n                                                                                                                    pos: Position {\n                                                                                                                        line: 22,\n                                                                                                                        column: 29,\n                                                                                                                    },\n                                                                                                                },\n                                                                                                            ),\n                                                                                                            pos: Position {\n                                                                                                                line: 22,\n                                                                                                                column: 28,\n                                                                                                            },\n                                                                                                        },\n                                                                                                        Add,\n                                                                                                        Spanned {\n                                                                                                            node: Sqrt(\n                                                                                                                Spanned {\n                                                                                                                    node: Identifier(\n                                                                                                                        \"disc\",\n                                                                                                                    ),\n                                                                                                                    pos: Position {\n                                                                                                                        line: 22,\n                                                                                                                        column: 38,\n                                                                                                                    },\n                                                                                                                },\n                                                                                                            ),\n                                                                                                            pos: Position {\n                                                                                                                line: 22,\n                                                                                                                column: 33,\n                                                                                                            },\n                                                                                                        },\n                                                                                                    ),\n                                                                                                    pos: Position {\n                                                                                                        line: 22,\n                                                                                                        column: 28,\n                                                                                                    },\n                                                                                                },\n                                                                                                Div,\n                                                                                                Spanned {\n                                                                                                    node: Binary(\n                                                                                                        Spanned {\n                                                                                                            node: Number(\n                                                                                                                2.0,\n                                                                                                            ),\n                                                                                                            pos: Position {\n                                                                                                                line: 22,\n                                                                                                                column: 48,\n                                                                                                            },\n                                                                                                        },\n                                                                                                        Mul,\n                                                                                                        Spanned {\n                                                                                                            node: Identifier(\n                                                                                                                \"a\",\n                                                                                                            ),\n                                                                                                            pos: Position {\n                                                                                                                line: 22,\n                                                                                                                column: 52,\n                                                                                                            },\n                                                                                                        },\n                                                                                                    ),\n                                                                                                    pos: Position {\n                                                                                                        line: 22,\n                                                                                                        column: 48,\n                                                                                                    },\n                                                                                                },\n                                                                                            ),\n                                                                                            pos: Position {\n                                                                                                line: 22,\n                                                                                                column: 28,\n                                                                                            },\n                                                                                        },\n                                                                                    ],\n                                                                                },\n                                                                                pos: Position {\n                                                                                    line: 22,\n                                                                                    column: 21,\n                                                                                },\n                                                                            },\n                                                                            Spanned {\n                                                                                node: Call {\n                                                                                    func: \"print\",\n                                                                                    args: [\n                                                                                        Spanned {\n                                                                                            node: Binary(\n                                                                                                Spanned {\n                                                                                                    node: Binary(\n                                                                                                        Spanned {\n                                                                                                            node: Unary(\n                                                                                                                Neg,\n                                                                                                                Spanned {\n                                                                                                                    node: Identifier(\n                                                                                                                        \"b\",\n                                                                                                                    ),\n                                                                                                                    pos: Position {\n                                                                                                                        line: 23,\n                                                                                                                        column: 29,\n                                                                                                                    },\n                                                                                                                },\n                                                                                                            ),\n                                                                                                            pos: Position {\n                                                                                                                line: 23,\n                                                                                                                column: 28,\n                                                                                                            },\n                                                                                                        },\n                                                                                                        Sub,\n                                                                                                        Spanned {\n                                                                                                            node: Sqrt(\n                                                                                                                Spanned {\n                                                                                                                    node: Identifier(\n                                                                                                                        \"disc\",\n                                                                                                                    ),\n                                                                                                                    pos: Position {\n                                                                                                                        line: 23,\n                                                                                                                        column: 38,\n                                                                                                                    },\n                                                                                                                },\n                                                                                                            ),\n                                                                                                            pos: Position {\n                                                                                                                line: 23,\n                                                                                                                column: 33,\n                                                                                                            },\n                                                                                                        },\n                                                                                                    ),\n                                                                                                    pos: Position {\n                                                                                                        line: 23,\n                                                                                                        column: 28,\n                                                                                                    },\n                                                                                                },\n                                                                                                Div,\n                                                                                                Spanned {\n                                                                                                    node: Binary(\n                                                                                                        Spanned {\n                                                                                                            node: Number(\n                                                                                                                2.0,\n                                                                                                            ),\n                                                                                                            pos: Position {\n                                                                                                                line: 23,\n                                                                                                                column: 48,\n                                                                                                            },\n                                                                                                        },\n                                                                                                        Mul,\n                                                                                                        Spanned {\n                                                                                                            node: Identifier(\n                                                                                                                \"a\",\n                                                                                                            ),\n                                                                                                            pos: Position {\n                                                                                                                line: 23,\n                                                                                                                column: 52,\n                                                                                                            },\n                                                                                                        },\n                                                                                                    ),\n                                                                                                    pos: Position {\n                                                                                                        line: 23,\n                                                                                                        column: 48,\n                                                                                                    },\n                                                                                                },\n                                                                                            ),\n                                                                                            pos: Position {\n                                                                                                line: 23,\n                                                                                                column: 28,\n                                                                                            },\n                                                                                        },\n                                                                                    ],\n                                                                                },\n                                                                                pos: Position {\n                                                                                    line: 23,\n                                                                                    column: 21,\n                                                                                },\n                                                                            },\n                                                                        ],\n                                                                    ),\n                                                                    pos: Position {\n                                                                        line: 21,\n                                                                        column: 22,\n                                                                    },\n                                                                },\n                                                            },\n                                                            pos: Position {\n                                                                line: 20,\n                                                                column: 22,\n                                                            },\n                                                        },\n                                                    },\n                                                    pos: Position {\n                                                        line: 19,\n                                                        column: 17,\n                                                    },\n                                                },\n                                            ],\n                                        ),\n                                        pos: Position {\n                                            line: 18,\n                                            column: 45,\n                                        },\n                                    },\n                                },\n                                pos: Position {\n                                    line: 18,\n                                    column: 13,\n                                },\n                            },\n                        ],\n                    ),\n                    pos: Position {\n                        line: 17,\n                        column: 43,\n                    },\n                },\n            },\n        ),\n    ],\n    expr: Spanned {\n        node: Let {\n            bindings: [\n                (\n                    \"p1\",\n                    None,\n                    Spanned {\n                        node: Instantiation {\n                            ty: \"Point\",\n                            args: [\n                                Spanned {\n                                    node: Number(\n                                        1.0,\n                                    ),\n                                    pos: Position {\n                                        line: 28,\n                                        column: 28,\n                                    },\n                                },\n                                Spanned {\n                                    node: Number(\n                                        2.0,\n                                    ),\n                                    pos: Position {\n                                        line: 28,\n                                        column: 31,\n                                    },\n                                },\n                            ],\n                        },\n                        pos: Position {\n                            line: 28,\n                            column: 18,\n                        },\n                    },\n                ),\n                (\n                    \"p2\",\n                    None,\n                    Spanned {\n                        node: Instantiation {\n                            ty: \"Point\",\n                            args: [\n                                Spanned {\n                                    node: Number(\n                                        3.0,\n                                    ),\n                                    pos: Position {\n                                        line: 29,\n                                        column: 28,\n                                    },\n                                },\n                                Spanned {\n                                    node: Number(\n                                        4.0,\n                                    ),\n                                    pos: Position {\n                                        line: 29,\n                                        column: 31,\n                                    },\n                                },\n                            ],\n                        },\n                        pos: Position {\n                            line: 29,\n                            column: 18,\n                        },\n                    },\n                ),\n                (\n                    \"transformer\",\n                    None,\n                    Spanned {\n                        node: Lambda {\n                            params: [\n                                Param {\n                                    name: \"p\",\n                                    type_annotation: Some(\n                                        Name(\n                                            \"Point\",\n                                        ),\n                                    ),\n                                },\n                            ],\n                            return_type: Some(\n                                Name(\n                                    \"Point\",\n                                ),\n                            ),\n                            body: Spanned {\n                                node: Instantiation {\n                                    ty: \"Point\",\n                                    args: [\n                                        Spanned {\n                                            node: Binary(\n                                                Spanned {\n                                                    node: AttributeAccess {\n                                                        obj: Spanned {\n                                                            node: Identifier(\n                                                                \"p\",\n                                                            ),\n                                                            pos: Position {\n                                                                line: 30,\n                                                                column: 58,\n                                                            },\n                                                        },\n                                                        attribute: \"x\",\n                                                    },\n                                                    pos: Position {\n                                                        line: 30,\n                                                        column: 59,\n                                                    },\n                                                },\n                                                Mul,\n                                                Spanned {\n                                                    node: Number(\n                                                        2.0,\n                                                    ),\n                                                    pos: Position {\n                                                        line: 30,\n                                                        column: 64,\n                                                    },\n                                                },\n                                            ),\n                                            pos: Position {\n                                                line: 30,\n                                                column: 59,\n                                            },\n                                        },\n                                        Spanned {\n                                            node: Binary(\n                                                Spanned {\n                                                    node: AttributeAccess {\n                                                        obj: Spanned {\n                                                            node: Identifier(\n                                                                \"p\",\n                                                            ),\n                                                            pos: Position {\n                                                                line: 30,\n                                                                column: 67,\n                                                            },\n                                                        },\n                                                        attribute: \"y\",\n                                                    },\n                                                    pos: Position {\n                                                        line: 30,\n                                                        column: 68,\n                                                    },\n                                                },\n                                                Mul,\n                                                Spanned {\n                                                    node: Number(\n                                                        2.0,\n                                                    ),\n                                                    pos: Position {\n                                                        line: 30,\n                                                        column: 73,\n                                                    },\n                                                },\n                                            ),\n                                            pos: Position {\n                                                line: 30,\n                                                column: 68,\n                                            },\n                                        },\n                                    ],\n                                },\n                                pos: Position {\n                                    line: 30,\n                                    column: 48,\n                                },\n                            },\n                        },\n                        pos: Position {\n                            line: 30,\n                            column: 27,\n                        },\n                    },\n                ),\n            ],\n            body: Spanned {\n                node: Block(\n                    [\n                        Spanned {\n                            node: Call {\n                                func: \"print\",\n                                args: [\n                                    Spanned {\n                                        node: Binary(\n                                            Spanned {\n                                                node: String(\n                                                    \"Distance: \",\n                                                ),\n                                                pos: Position {\n                                                    line: 32,\n                                                    column: 19,\n                                                },\n                                            },\n                                            Concat,\n                                            Spanned {\n                                                node: MethodCall {\n                                                    obj: Spanned {\n                                                        node: Identifier(\n                                                            \"p1\",\n                                                        ),\n                                                        pos: Position {\n                                                            line: 32,\n                                                            column: 34,\n                                                        },\n                                                    },\n                                                    method: \"distance\",\n                                                    args: [\n                                                        Spanned {\n                                                            node: Identifier(\n                                                                \"p2\",\n                                                            ),\n                                                            pos: Position {\n                                                                line: 32,\n                                                                column: 46,\n                                                            },\n                                                        },\n                                                    ],\n                                                },\n                                                pos: Position {\n                                                    line: 32,\n                                                    column: 36,\n                                                },\n                                            },\n                                        ),\n                                        pos: Position {\n                                            line: 32,\n                                            column: 19,\n                                        },\n                                    },\n                                ],\n                            },\n                            pos: Position {\n                                line: 32,\n                                column: 13,\n                            },\n                        },\n                        Spanned {\n                            node: Let {\n                                bindings: [\n                                    (\n                                        \"squares\",\n                                        None,\n                                        Spanned {\n                                            node: VectorGenerator {\n                                                expr: Spanned {\n                                                    node: Binary(\n                                                        Spanned {\n                                                            node: Identifier(\n                                                                \"x\",\n                                                            ),\n                                                            pos: Position {\n                                                                line: 33,\n                                                                column: 28,\n                                                            },\n                                                        },\n                                                        Pow,\n                                                        Spanned {\n                                                            node: Number(\n                                                                2.0,\n                                                            ),\n                                                            pos: Position {\n                                                                line: 33,\n                                                                column: 33,\n                                                            },\n                                                        },\n                                                    ),\n                                                    pos: Position {\n                                                        line: 33,\n                                                        column: 28,\n                                                    },\n                                                },\n                                                var: \"x\",\n                                                iterable: Spanned {\n                                                    node: VectorLiteral(\n                                                        [\n                                                            Spanned {\n                                                                node: Number(\n                                                                    1.0,\n                                                                ),\n                                                                pos: Position {\n                                                                    line: 33,\n                                                                    column: 43,\n                                                                },\n                                                            },\n                                                            Spanned {\n                                                                node: Number(\n                                                                    2.0,\n                                                                ),\n                                                                pos: Position {\n                                                                    line: 33,\n                                                                    column: 46,\n                                                                },\n                                                            },\n                                                            Spanned {\n                                                                node: Number(\n                                                                    3.0,\n                                                                ),\n                                                                pos: Position {\n                                                                    line: 33,\n                                                                    column: 49,\n                                                                },\n                                                            },\n                                                            Spanned {\n                                                                node: Number(\n                                                                    4.0,\n                                                                ),\n                                                                pos: Position {\n                                                                    line: 33,\n                                                                    column: 52,\n                                                                },\n                                                            },\n                                                            Spanned {\n                                                                node: Number(\n                                                                    5.0,\n                                                                ),\n                                                                pos: Position {\n                                                                    line: 33,\n                                                                    column: 55,\n                                                                },\n                                                            },\n                                                        ],\n                                                    ),\n                                                    pos: Position {\n                                                        line: 33,\n                                                        column: 42,\n                                                    },\n                                                },\n                                            },\n                                            pos: Position {\n                                                line: 33,\n                                                column: 27,\n                                            },\n                                        },\n                                    ),\n                                ],\n                                body: Spanned {\n                                    node: For {\n                                        var: \"s\",\n                                        iterable: Spanned {\n                                            node: Identifier(\n                                                \"squares\",\n                                            ),\n                                            pos: Position {\n                                                line: 34,\n                                                column: 27,\n                                            },\n                                        },\n                                        body: Spanned {\n                                            node: If {\n                                                cond: Spanned {\n                                                    node: Binary(\n                                                        Spanned {\n                                                            node: Identifier(\n                                                                \"s\",\n                                                            ),\n                                                            pos: Position {\n                                                                line: 34,\n                                                                column: 40,\n                                                            },\n                                                        },\n                                                        Gt,\n                                                        Spanned {\n                                                            node: Number(\n                                                                10.0,\n                                                            ),\n                                                            pos: Position {\n                                                                line: 34,\n                                                                column: 44,\n                                                            },\n                                                        },\n                                                    ),\n                                                    pos: Position {\n                                                        line: 34,\n                                                        column: 40,\n                                                    },\n                                                },\n                                                then_expr: Spanned {\n                                                    node: Call {\n                                                        func: \"print\",\n                                                        args: [\n                                                            Spanned {\n                                                                node: Identifier(\n                                                                    \"s\",\n                                                                ),\n                                                                pos: Position {\n                                                                    line: 34,\n                                                                    column: 54,\n                                                                },\n                                                            },\n                                                        ],\n                                                    },\n                                                    pos: Position {\n                                                        line: 34,\n                                                        column: 48,\n                                                    },\n                                                },\n                                                else_expr: Spanned {\n                                                    node: Block(\n                                                        [],\n                                                    ),\n                                                    pos: Position {\n                                                        line: 34,\n                                                        column: 62,\n                                                    },\n                                                },\n                                            },\n                                            pos: Position {\n                                                line: 34,\n                                                column: 36,\n                                            },\n                                        },\n                                    },\n                                    pos: Position {\n                                        line: 34,\n                                        column: 17,\n                                    },\n                                },\n                            },\n                            pos: Position {\n                                line: 33,\n                                column: 13,\n                            },\n                        },\n                        Spanned {\n                            node: Let {\n                                bindings: [\n                                    (\n                                        \"a\",\n                                        None,\n                                        Spanned {\n                                            node: Number(\n                                                10.0,\n                                            ),\n                                            pos: Position {\n                                                line: 36,\n                                                column: 21,\n                                            },\n                                        },\n                                    ),\n                                ],\n                                body: Spanned {\n                                    node: While {\n                                        cond: Spanned {\n                                            node: Binary(\n                                                Spanned {\n                                                    node: Identifier(\n                                                        \"a\",\n                                                    ),\n                                                    pos: Position {\n                                                        line: 36,\n                                                        column: 34,\n                                                    },\n                                                },\n                                                Gt,\n                                                Spanned {\n                                                    node: Number(\n                                                        0.0,\n                                                    ),\n                                                    pos: Position {\n                                                        line: 36,\n                                                        column: 38,\n                                                    },\n                                                },\n                                            ),\n                                            pos: Position {\n                                                line: 36,\n                                                column: 34,\n                                            },\n                                        },\n                                        body: Spanned {\n                                            node: Block(\n                                                [\n                                                    Spanned {\n                                                        node: Assignment {\n                                                            target: \"a\",\n                                                            value: Spanned {\n                                                                node: Binary(\n                                                                    Spanned {\n                                                                        node: Identifier(\n                                                                            \"a\",\n                                                                        ),\n                                                                        pos: Position {\n                                                                            line: 37,\n                                                                            column: 22,\n                                                                        },\n                                                                    },\n                                                                    Sub,\n                                                                    Spanned {\n                                                                        node: Number(\n                                                                            1.0,\n                                                                        ),\n                                                                        pos: Position {\n                                                                            line: 37,\n                                                                            column: 26,\n                                                                        },\n                                                                    },\n                                                                ),\n                                                                pos: Position {\n                                                                    line: 37,\n                                                                    column: 22,\n                                                                },\n                                                            },\n                                                        },\n                                                        pos: Position {\n                                                            line: 37,\n                                                            column: 17,\n                                                        },\n                                                    },\n                                                    Spanned {\n                                                        node: Call {\n                                                            func: \"print\",\n                                                            args: [\n                                                                Spanned {\n                                                                    node: Identifier(\n                                                                        \"a\",\n                                                                    ),\n                                                                    pos: Position {\n                                                                        line: 38,\n                                                                        column: 23,\n                                                                    },\n                                                                },\n                                                            ],\n                                                        },\n                                                        pos: Position {\n                                                            line: 38,\n                                                            column: 17,\n                                                        },\n                                                    },\n                                                ],\n                                            ),\n                                            pos: Position {\n                                                line: 36,\n                                                column: 41,\n                                            },\n                                        },\n                                    },\n                                    pos: Position {\n                                        line: 36,\n                                        column: 27,\n                                    },\n                                },\n                            },\n                            pos: Position {\n                                line: 36,\n                                column: 13,\n                            },\n                        },\n                        Spanned {\n                            node: Call {\n                                func: \"print\",\n                                args: [\n                                    Spanned {\n                                        node: If {\n                                            cond: Spanned {\n                                                node: Is(\n                                                    Spanned {\n                                                        node: Identifier(\n                                                            \"p1\",\n                                                        ),\n                                                        pos: Position {\n                                                            line: 41,\n                                                            column: 23,\n                                                        },\n                                                    },\n                                                    \"Point\",\n                                                ),\n                                                pos: Position {\n                                                    line: 41,\n                                                    column: 26,\n                                                },\n                                            },\n                                            then_expr: Spanned {\n                                                node: String(\n                                                    \"Success\",\n                                                ),\n                                                pos: Position {\n                                                    line: 41,\n                                                    column: 36,\n                                                },\n                                            },\n                                            else_expr: Spanned {\n                                                node: String(\n                                                    \"Fail\",\n                                                ),\n                                                pos: Position {\n                                                    line: 41,\n                                                    column: 51,\n                                                },\n                                            },\n                                        },\n                                        pos: Position {\n                                            line: 41,\n                                            column: 19,\n                                        },\n                                    },\n                                ],\n                            },\n                            pos: Position {\n                                line: 41,\n                                column: 13,\n                            },\n                        },\n                        Spanned {\n                            node: Call {\n                                func: \"print\",\n                                args: [\n                                    Spanned {\n                                        node: As(\n                                            Spanned {\n                                                node: Identifier(\n                                                    \"p1\",\n                                                ),\n                                                pos: Position {\n                                                    line: 42,\n                                                    column: 19,\n                                                },\n                                            },\n                                            \"Point\",\n                                        ),\n                                        pos: Position {\n                                            line: 42,\n                                            column: 22,\n                                        },\n                                    },\n                                ],\n                            },\n                            pos: Position {\n                                line: 42,\n                                column: 13,\n                            },\n                        },\n                    ],\n                ),\n                pos: Position {\n                    line: 31,\n                    column: 12,\n                },\n            },\n        },\n        pos: Position {\n            line: 28,\n            column: 9,\n        },\n    },\n}"
 right: ""
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace


failures:
    parser::tests::test_parse_integral_program

test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 43 filtered out; finished in 0.00s

error: test failed, to rerun pass `--lib`
